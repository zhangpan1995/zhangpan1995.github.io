# 学习目标

> - [x] 能够设置获取自定义属性
>   - 设置自定义属性：
>     - 通用：setAttribute
>     - 新版写法：data-xxx
>   - 获取自定义属性：
>     - 通用：getAttribute
>     - 新版：dataset.xxx
> - [x] 能够利用classList操作类名
>   - 添加类名：classList.add()
>   - 删除类名：classList.remove()
>   - 切换类名：classList.toggle()
>   - 判断类名是否存在：classList.contains()
>
> 。。。。。。



**理解上课的知识点......**



# 正则表达式

##### ヾ(๑╹◡╹)ﾉ" 用户名验证案例

> 正则表达式已经准备好，直接使用即可

**需求：当失去焦点时，对用户名进行判断，用户名要求用户英文字母、数字、下划线或者短横线组成，并且用户名长度为6~16位**

**步骤：**

1. 找对象——》input
2. 创建正则规则，方便之后判断：**/^[a-zA-Z0-9-_]{6,16}$/**
3. 给input注册失去焦点事件
4. 当失去焦点时，获取input的值，通过正则判断：
   1. 当正则判断通过为true，则给span标签加right类
   2. 当正则判断未通过为false，给span设置wrong类



##### ヾ(๑╹◡╹)ﾉ" 昵称验证中文案例

> 正则表达式已经准备好，直接使用即可

**需求：当输入框失去焦点时，对用户名进行判断，用户名只能是中文**

**步骤：**

1. 找对象——》input
2. 创建正则规则，方便之后判断：**/^[\u4e00-\u9fa5]{2,8}$/**
3. 给input注册change事件
4. 当失去焦点并且内容修改时，触发change事件，通过正则判断：
   1. 当正则判断通过为true，则给span标签加right类
   2. 当正则判断未通过为false，给span设置wrong类

**事件拓展：**

- `change事件` 失去了焦点并且内容改变了，才会触发事件

[常用正则网址](https://www.baidufe.com/fehelper/regexp/index.html)



## 修饰符

**修饰符约束正则执行的某些细节行为，如：是否区分大小写，是支持多行匹配等**

**语法：**`/表达式/修饰符`

- `i` 是单词 `ignore` 的缩写，正则匹配时字母不区分大小写

```js
console.log(/a/i.test('a'))
console.log(/a/i.test('A'))
```

- `g` 是单词 `global` 的缩写，匹配所有满足正则表达式的结果

- 替换字符串中的字符：`str.replace(正则表达式,'需要被替换的文本')`



##### ヾ(๑╹◡╹)ﾉ" 过滤敏感字案例

**需求：需要把用户输入内容中的敏感字替换成**

**步骤：**

1. 找对象——》textarea、button、div
2. 给btn注册点击事件
   1. 点击之后，获取area中的内容，进行replce替换，把所有的 基情 和 激情 都替换成 **
   2. 把替换之后的内容，设置给div的内容



# 标签的自定义属性

## 固有属性和自定义属性

标签上属性可以大致分成两类：

- 固有属性：标签上本来就有的属性：如：title、id、class......

- 自定义属性：标签上本来没有的属性，自己随意添加的属性

**需求：通过js获取标签上的属性**

如果要获取**html标签上**的固有属性（本来就有的属性：title、id、class），可以直接通过dom对象点语法获取和设置

**比如：**

```html
<div title="one">我是一个标签</div>

<script>
  let box = document.querySelector('div')
  console.log(box.title) // one
</script>
```

---

但是如果要获取**html标签上**的自定义属性（本来没有的属性，自己随意添加的），使用点语法就不行了，需要通过特殊的方法获取和设置

**比如：**

```html
<div aa="one" >我是一个标签</div>

<script>
  let box = document.querySelector('div')
  console.log( box.aa ) // undefined
</script>
```



**注意点：**标签的自定义属性在DOM对象中是不存在的，DOM对象中只会储存固有属性

> 如果需要通过DOM对象操作标签上的自定义属性，此时需要通过attribute相关的方法完成



## attribute方法

> attribute系列方法是通用的操作标签属性的方法，不管是固有属性还是自定义属性都可以操作

```js
// 获取标签的属性
box.getAttribute('属性名');
// 设置标签的属性
box.setAttribute('属性名', '属性值');
// 移除标签的属性
box.removeAttribute('属性名');
```

**注意点：attribute方法可以操作标签的自定义属性和固有属性**

## data-自定义属性

**data-自定义属性：**传统的自定义属性没有专门的定义规则，开发者随意命名，不够规范，所以在html5中推出来了专门的 data-自定义属性，在标签上一律以data-开头

**注意点：** 在DOM对象上的data-自定义属性，一律以dataset对象方式获得

![image-20220120002120585](webAPIs-day07笔记.assets/image-20220120002120585.png)

# 综合案例

##### ヾ(๑╹◡╹)ﾉ" 小兔鲜注册页面

![image-20220122002159073](webAPIs-day07笔记.assets/image-20220122002159073.png)

**需求1：点击验证码**

**步骤：**

1. 找对象——》a.code
2. 给code注册点击事件
3. 点击之后：
   1. 声明一个变量count储存还剩多少时间
   2. 先设置code的内容为 `05秒后重新获取`
   3. 开启定时器，每隔1s，count--，并且动态渲染code中的内容 `04秒后重新获取`
   4. 等剩余时间count等于0时，此时清除定时器，变设置code中的内容为 `重新获取`

**需求2：用户名校验**

**步骤：**

1. 找对象——》input[name=username]
2. 给input注册change事件
3. 当input被change时
   1. 获取用户输入的内容
   2. 声明变量reg储存正则规则： **/^[a-zA-Z0-9-_]{6,16}$/**
   3. 用正则判断输入是否符合规则：
      1. 如果符合规则，则把span标签内容的提示消息清空
      2. 如果不符合规则，则把span标签内容设置为 请输入6~16位的用户名

**需求3：把根据正则的设置内容的代码封装成函数**

![1661496545010](assets/1661496545010.png)

**步骤：**

1. 用function (){} 把根据正则设置内容的代码包裹起来
2. 把函数中每次使用需要变化的部分，变成函数的参数，由调用时实参传入即可

**需求4：手机号验证**

**步骤：**

1. 找对象——》input[name=phone]
2. 给input注册change事件
   1. 正则：**/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/**
   2. 信息：'请输入11位手机号'

**需求5：验证码验证**

**步骤：**

1. 找对象——》input[name=code]
2. 给input注册change事件
3. 当input被change时，调用verity事件，直接解决
   1. 正则：**/^\d{6}$/**
   2. 信息：'请输入6位的验证码'

**需求6：密码验证**

**步骤：**

1. 找对象——》input[name=password]
2. 给input注册change事件
3. 当input被change时，调用verity事件，直接解决
   1. 正则：**/^[a-zA-Z0-9-_]{6,20}$/**
   2. 信息：'请输入正确的密码'

**需求7：再次密码验证**

**步骤：**

1. 找对象——》input[name=confirm]
2. 给input注册change事件
3. 当input被change时，判断两次输入的密码是否相同
   1. 如果相同，则清空span的内容
   2. 如果不相同，则显示 '两次输入的密码不一致'

**需求8：我同意模块**

**步骤：**

1. 找对象——》i.icon-queren
2. 给i注册点击事件
3. 点击之后，给i添加icon-queren2类
4. 优化：如果点一次加icon-queren2，再点一次取消，类名的添加和取消可以使用classList.toggle('类名')

**需求9：提交按钮模块**

**步骤：**

1. 找对象——》button.submit
2. 给button注册点击事件
3. button点击之后
   1. 阻止button按钮的默认提交功能，否则会提交
   2. 对以上所有表单一一判断校验，并且判断是否选中确认协议，需要在verity函数中设置返回正则判断结果
      1. 如果校验有问题，需要提醒信息
      2. 如果以上内容全都通过，此时直接跳转去登录页  login.html
4. 如果用户为勾选同意协议，跳转的代码不执行，判断需要卸载跳转代码的前面


