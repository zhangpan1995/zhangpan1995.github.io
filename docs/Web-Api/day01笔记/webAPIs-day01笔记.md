# 学习目标

>- [ ] 能够说出什么是 Web API
>
> - [ ] 能够说出什么是DOM
> 
> - [ ] 能够获取页面元素
>
>- [ ] 能够说出事件三要素是什么
> 
> - [ ] 能够给元素注册事件
>
>- [ ] 能够说出innerHTML和innerText的区别
> - [ ] 能够修改元素的属性和样式
> 
> 。。。。。。



**理解上课的知识点......**



# WebAPI的基本认知

## 作用和组成

**作用：** 用 **JS** 去操作页面 **html** 和 **浏览器**

**分类：**

![image-20220103184839425](webAPIs-day01笔记.assets/image-20220103184839425.png)

- **DOM（文档对象模型）**：一套操作页面元素的API（方法）

  > DOM可以把HTML看做是文档树，通过DOM提供的API可以对页面中的元素进行操作

- **BOM（浏览器对象模型）**：一套操作浏览器功能的API（方法）

  > 通过BOM可以操作浏览器窗口，比如：弹出框、控制浏览器跳转、获取分辨率等 

**相关的概念：**

- **API（Application Programming Interface）：应用程序编程接口**。API是一些预先定义的方法，这些方法能够实现某些特定的功能，我们无须知道这些API的实现方式，但是我们需要知道这些API如何使用。
- **webAPI：** 浏览器提供的一套操作网页和浏览器的API（方法），通过这套API我们可以非常轻易的操作页面的元素和浏览器的一些功能。



## DOM介绍

**DOM**（Document Object Model——**文档对象模型**）：是一套操作页面元素的API（方法）

**作用：** 开发网页内容特效和实现用户交互

> 之前学习的js基础就是学习ECMAScript语法规范，都是在打基础，并不能完成非常炫酷的效果。
>
> 一旦学了Web API之后就能操作页面元素了，就可以做出来一些炫酷的效果。

---

**总结：**

1. `webAPIs` 阶段中我们主要学习哪两个部分？分别叫做什么？
   - 

---



## DOM树

**DOM树：** 将HTML文档以树状结构直观的表现出来，我们称之为文档树或者DOM树

**作用：** DOM树直观的体现了标签与标签之间的关系

![image-20220103190923612](webAPIs-day01笔记.assets/image-20220103190923612.png)



## DOM对象

**DOM对象：** 浏览器会根据HTML标签生成对应的JS对象

- 所有的标签属性都可以在这个对象上面找到
- 修改这个对象的属性会自动映射到标签身上

**DOM的核心思想：**

- 把网页内容当做对象来处理

**DOM中常见的概念：**

- 文档 `document`：一个网页可以称为文档

- 节点 `node`：网页中的所有内容都是节点（标签、文本、注释等）

- 元素 `element`：网页中的标签（标签节点）



# 获取DOM对象

> 在DOM中，如果需要操作一个元素，首先需要先获取到对应的DOM对象
>

## 通过css选择器获取DOM对象（重点）

> 比较好用的方法

### 获取单个元素

**代码：**`document.querySelector('css选择器');`

**返回值：** 一个元素。如果有多个，之后返回第一个，如果没有返回null

```js
// 参数：css选择器
// 返回值：一个元素。如果有多个，之后返回第一个，如果没有返回null
let document.querySelector('css选择器')
```

关于`console.log`和`console.dir`的区别：

- `console.log`：如果打印的是一个元素的时候，是以标签的形式进行展示的
- `console.dir`：如果打印的是一个元素的时候，是以对象的形式进行展示的



**注意点：**

- 一般script标签写在body标签里面的最下面，目的是保证页面加载完之后，再获取元素。

  > 如果script标签写在body标签上面，因为页面代码是从上往下执行的，此时页面还没加载出来就获取元素，所以无法获取到。

---



### 获取多个元素

**代码：**`document.querySelectorAll('css选择器')`

**返回值：** 伪数组。无论找到几个元素，返回值都是伪数组

```java
// 参数：css选择器
// 返回值：伪数组。无论找到几个元素，返回值都是伪数组
document.querySelectorAll('css选择器')
```

**伪数组的特点：**

- 有长度，有索引
- 没有数组的相关方法，比如：arr.push()......



##### ヾ(๑╹◡╹)ﾉ" 在控制台依次输出3个li的DOM对象

![image-20220109215847318](webAPIs-day01笔记.assets/image-20220109215847318.png)

## 其他获取DOM对象方法（了解）

### 通过id获取元素

> 可以通过id属性获取元素

```javascript
//功能：通过id获取元素
//参数：字符串类型的id值
//返回值：元素，如果id不存在，会返回null
let box = document.getElementById('box')
```

### 通过标签名获取元素

> 可以通过标签名获取元素

```javascript
//参数：标签名
//返回值：一个伪数组，伪数组不是真正的数组，有下标和长度，可以遍历，但是不能使用数组特定的方法
let divs = document.getElementsByTagName('div')
```

### 通过类名获取

**代码：**`document.getElementsByClassName("类名")`

**返回值：** 伪数组。无论找到几个元素，返回值都是伪数组

```javascript
// 参数：类名
// 返回值：伪数组。无论找到几个元素，返回值都是伪数组
let divs = document.getElementsByClassName("box")
```



# 注册事件（on方式）

> 在实际网页中是需要和用户进行交互的，比如在网页中当用户点击按钮之后把第一张图片切换成第二张图片，此时就需要使用到事件来完成效果
>
> 触发事件——》响应机制

**需求：** 点击一个按钮，在控制台打印一句话

**事件三要素：**

- **事件源：** 触发事件的那个元素（比如：按钮、盒子）
- **事件名：** 事件的名字（比如：点击、移入......）
- **事件处理程序：**触发事件之后要执行的代码（比如：一般就是一个函数）

> 场景：按钮被用户点击了，网页显示了一张美女图片。事件三要素是啥？

**基本语法：**

`事件源.on事件名 = 事件处理程序`

**代码：**

```javascript
let btn = document.querySelector('.btn')
// on：当 
// click:点击 ——》当按钮被点击的时候触发
btn.onclick = function() {
  console.log('哎呀，被点击了！')
}
```

**注意点：**

- 事件处理程序并不是立马执行，只有当事件被触发时，才会在会执行

  > 好比是程序员告诉按钮（注册事件）：按钮兄弟，你被点了后，记得在控制台叫一声
  >
  > - 告诉完之后按钮后，按钮不会立马叫
  > - 等按钮真的被点了，才会在控制台中叫

![image-20220110172413201](webAPIs-day01笔记.assets/image-20220110172413201.png)

---



# 设置/修改DOM元素属性

> 在DOM中，页面标签的属性和DOM对象的属性是一一对应的，因此我们可以通过修改DOM对象的属性来修改标签的属性。

## 设置/修改元素常见属性

- 标签的alt，title，src，等常见属性，可以直接通过对象进行修改。

##### ヾ(๑╹◡╹)ﾉ"点击按钮，切换图片

![111](webAPIs-day01笔记.assets/111.gif)

**步骤：**

- 找对象——》获取事件源（按钮）
- 给对象注册事件——》给按钮注册click点击事件
- 设置事件处理程序——》写换图片的函数，找到图片修改图片的路径

---



##### ヾ(๑╹◡╹)ﾉ"点击按钮，给div设置样式

- **因为在js中class是关键字，所以需要标签的class属性在DOM对象中要用className替换**

![点击给div设置样式](webAPIs-day01笔记.assets/点击给div设置样式.gif)

**步骤：**

- 找对象——》获取事件源（按钮）
- 给对象注册事件——》给按钮注册onclick点击事件
- 设置事件处理程序——》给div添加class类

---



##### ヾ(๑╹◡╹)ﾉ" 小米搜索框案例

> 把写好的静态页面，通过注册事件的方式完成动态功能

![222](webAPIs-day01笔记.assets/222.gif)

**步骤：**

1. 找对象——》获取input.search 和 需要隐藏显示切换的 ul.result-list
3. 注册事件——》给input注册获取和失去焦点事件
3. 设置事件处理函数
   1. 当input获取焦点时，显示下拉菜单show，文本框加颜色边框search
   2. 当input失去焦点时，隐藏下拉菜单hide，文本框去除颜色边框serach


**事件拓展：**

- **onfocus：**获取焦点
- **onblue：**失去焦点



## 设置/修改元素样式属性

- 标签不仅可以通过给className属性设置样式，也可以通过style属性设置样式
- 同理，对于DOM对象来说，不仅可以通过className属性设置样式，也可以通过style属性操作样式

**需求：通过style属性设置div的宽高和背景颜色**

**注意点：**

- 在DOM对象的style属性是一个对象，里面包含了该标签所有的行内样式键值对

- 如果需要设置的是类似于 `background-color` 样式时，需要改变驼峰命名法

  > 因为`-`在js中不是一个合法的标识符

- 通过style属性设置的样式是行内样式，优先级会更高！

**区别：**

- 使用className设置的样式是css样式，是通过类选择器完成的样式显示
- **style属性中的样式是行内样式，并且优先级高于className设置的样式**

---



##### ヾ(๑╹◡╹)ﾉ" 开关灯案例：点击按钮，控制整个网页背景色在黑色和白色之间切换

![1000](webAPIs-day01笔记.assets/1000.gif)

**步骤：**

1. 找到两个按钮，分别给两个按钮注册不同的点击事件
2. 给按钮注册点击事件
   1. 开灯按钮点击之后，设置body标签的背景颜色为白色
   2. 关灯按钮点击之后，设置body标签的背景颜色为黑色



**关于获取元素对象的特殊操作：**

- `document.body` ：直接获取body元素
- `document.documentElement` ：直接获取html元素
- `document.head` ：直接获取head元素
- `document.title` ：直接获取title中的文本



## 设置/修改表单元素属性

> 之前操作了很多普通属性，比如id、title、src、className......
>
> 在开发时候也会操作表单属性，比如：value、disabled、checked、selected



### value属性

- 通过value属性可以操作表单的value值

##### ヾ(๑╹◡╹)ﾉ" 搜索框案例

> 类似于用value属性模仿placeholder的效果

![仿京东搜索案例](webAPIs-day01笔记.assets/仿京东搜索案例.gif)

**步骤：**

1. 找到input标签，给input标签注册事件
2. 注册获取焦点事件：获取焦点时，如果发现value是默认值，则清空
3. 注册失去焦点事件：失去焦点时，如果发现空的，此时则填上默认值

---



### 布尔类型属性

> 对于disabled、checked、selected三个属性来说，比较特殊，值应该是一个布尔值

在表单中，以下三个常见布尔类型的属性：

> 值只能是true或者false

- disabled：true表示禁用
- checked：true表示选中
- selected：true表示option被选中

以上的布尔类型的属性，设置和获取的都是true/false

**需求：**

- **点击按钮，让input禁用**
- **点击按钮，让多选框选中**

---



##### ヾ(๑╹◡╹)ﾉ" 随机翻牌子案例（点击按钮，让一个随机的下拉菜单中的option选中）

![随机翻牌子案例](webAPIs-day01笔记.assets/随机翻牌子案例.gif)

**步骤：**	

- 找到按钮，给按钮注册点击事件

- 点击之后，需要让随机的下拉菜单选中——》通过selected = true

  - 需要让随机一项选中，只需要获取一个随机下标即可

    > 获取0~n的随机整数：parseInt(Math.random() * (n + 1))



# 设置/修改DOM元素内容

> 之前修改按钮的文字，都是使用input标签，修改其中的value属性完成的
>
> 其实也可以使用button标签，修改里面的文本完成。

**需求：** 当button标签被点击之后，让button中的内容更改

**相同点：** 通过**innerText**和**innerHTML**都可以操作标签的内容。

**区别：**

- **innerText属性：**
  - 只能获取文本——》如果有标签会忽略

  - 只能设置文本——》当设置的是标签时，标签不能被解析，标签不能生效

- **innerHTML属性：**
  - 可以获取文本和标签
  - 可以设置文本和标签——》当设置的是标签，标签可以被解析，标签可以生效

```html
<div class="father">
  我是father中的内容
  <h1>我是一个h1标签</h1>
</div>

<script>
  let box = document.querySelector('.father')

  // 获取内容
  console.log( box.innerText )// 只能获取文本
  console.log( box.innerHTML )// 能获取文本和标签

  // 设置内容
  box.innerText = '<h1>我是一个h1标签</h1>'// 只能设置文本，不会解析标签
  box.innerHTML = '<h1>我是一个h1标签</h1>'// 能设置文本和标签，标签会被解析
</script>
```

##### ヾ(๑╹◡╹)ﾉ" 随机点名案例

![333](webAPIs-day01笔记.assets/333.gif)

**需求：** 点击按钮之后，随机抽取数组中的名字显示在div中

**步骤：**

- 获取div和button对象
- 给button注册点击事件
- 点击之后，在数组中随机选择一个选手，设置到div中去



# 事件中的this

> 在当前事件处理函数中，可以使用this关键字——》就表示当前触发的元素（事件源）

**需求：点击button按钮之后，把当前button按钮中的内容进行修改**

- 可以找到元素，进行修改

- 通过事件处理函数中的this进行修改

  > 好处就是如果元素的名字发生改变，此时this不需要改变

**代码：**

```javascript
//  1、找对象
let btn = document.querySelector('button')

// 2、注册事件
btn.onclick = function() {
   //  1、直接找到这个对象修改vlaue
   // btn.innerHTML = '内容被更改了'

   // 2、如果在事件处理函数中操作的就是当前事件源（元素），可以通过this表示
   this.innerHTML = '内容被更改了'
}
```

---

**注意点：this在不同环境中，代表的含义不同，在js进阶阶段会展开讲解**

##### ヾ(๑╹◡╹)ﾉ" 导航点击变红案例：点击li标签，就让li标签背景颜色变成红色

> 把写好的静态页面，通过注册事件的方式完成动态功能

![点击让li变色](webAPIs-day01笔记.assets/点击让li变色.gif)

**步骤：**

1. 找到所有的li标签
2. 给所有的li标签注册点击事件——》通过for循环遍历更方便
3. 点击之后，给当前的li设置背景颜色为红色

**注意点：**

- 使用for循环给多个对象添加事件时，此时也可以通过this进行设置

---

##### ヾ(๑╹◡╹)ﾉ"  百度换肤

> 点击小图片，把小图片的src属性值赋值给body即可

![999](webAPIs-day01笔记.assets/999.gif)

**步骤：**

1. 找到每一个img标签，注册点击事件
2. 点击之后，把img标签的src属性直接设置给body标签的backgroundImage即可

**注意点：**backgroundImage的格式是url(路径)



# 阻止a标签跳转（了解）

> 对于a标签来说，默认的行为就是进行页面跳转，如果不想让a标签进行跳转，可以在注册事件中使用`return false`

**需求：** 点击a标签，让img标签切换图片

在事件处理函数中，最后写上`return false` ，可以**阻止a标签的跳转**功能

```javascript
//  1、找对象
let link = document.querySelector('.link')
let img = document.document.querySelector('img')

// 2、注册事件
link.onclick = function () {
    img.src = './images/2.jpg'

    //  阻止a标签的默认跳转
    return false
}
```



# 综合案例

##### ヾ(๑╹◡╹)ﾉ" 相册案例

> 把写好的静态页面，通过注册事件的方式完成动态功能

![美女相册切换案例](webAPIs-day01笔记.assets/美女相册切换案例.gif)

- 给a标签注册点击事件，当a点击之后，将href属性的属性值赋值给bigImg的src属性
- 同时需要把a标签的title属性值赋值给des的内容

**注意点：**去除a标签的默认跳转